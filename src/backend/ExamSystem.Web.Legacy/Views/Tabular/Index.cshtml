@using Microsoft.AspNetCore.Mvc.TagHelpers
@model ExamSystem.Web.Models.TabularViewModel

@{
    Layout = null;
}

<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>

    @{
        <title>Tabulator</title>
    }

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true"/>
    <link href="~/tabler/css/tabler.min.css" rel="stylesheet" asp-append-version="true"/>
    <partial name="_TabulatorPartial"/>

    <style>
        :root {
            --tblr-font-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
        }

        body {
            font-feature-settings: "cv03", "cv04", "cv11";
        }
    </style>

</head>

<body>

<div class="container-xl my-5">
    <div class="row" id="example-table"></div>
</div>

<script src="~/lib/jquery/dist/jquery.min.js" asp-append-version="true"></script>
<script src="~/tabler/js/tabler.min.js" asp-append-version="true"></script>
<script src="~/js/site.js" asp-append-version="true"></script>

<script>
    const table = new Tabulator("#example-table", {
        pagination: true,
        paginationMode: "remote",
        filterMode: "remote",
        sortMode: "remote",
        paginationCounter: "rows",
        paginationSize: 15,
        paginationSizeSelector: [15, 25, 35, 50],
        ajaxURL: "@Model.EndpointUrl",
        ajaxContentType: "json",
        ajaxConfig: {
            method: "POST",
        },
        height: 500, //  enables the Virtual DOM
        layout: "fitColumns",
        columns: [
            {
                title: "Id",
                field: "id",
                sorter: "number",
                headerFilter: "number",
                headerFilterFunc: ">=",
                headerSortTristate: true
            },
            {
                title: "Title",
                field: "title",
                sorter: "string",
                headerFilterFunc: "like",
                headerFilter: "input",
                headerSortTristate: true
            },
            {
                title: "Genre",
                field: "genre",
                sorter: "string",
                headerFilterFunc: "like",
                headerFilter: "input",
                headerSortTristate: true
            },
            {
                title: "Author",
                field: "author",
                headerFilterFunc: "like",
                sorter: "string",
                headerFilter: "input",
                headerSortTristate: true
            },
            {
                title: "Price",
                field: "price",
                sorter: "number",
                headerFilter: "number",
                headerFilterFunc: ">=",
                headerSortTristate: true
            },
            {
                title: "Inventory Status",
                field: "inventoryStatus",
                sorter: "string",
                headerFilterFunc: "=",
                headerSortTristate: true,
                headerFilter: "list",
                headerFilterParams: {
                    values: {
                        InStock: "In Stock",
                        OutOfStock: "Out Of Stock",
                        UpComing: "Up Coming",
                        "": "All",
                    },
                },
            },
        ],
    });
</script>

</body>

</html>
